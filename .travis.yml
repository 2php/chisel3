# We currently skip the backend tests so we don't need to install verilator.
language: scala
scala:
  - 2.11.12
  - 2.12.4
sudo: false

cache:
  directories:
    $HOME/.ivy2
#    $INSTALL_DIR

git:
  depth: 10

sbt_args: -Dsbt.log.noformat=true

#env:
#  global:
#    INSTALL_DIR=$TRAVIS_BUILD_DIR/install
#    VERILATOR_ROOT=$INSTALL_DIR
#    PATH=$PATH:$VERILATOR_ROOT/bin:$TRAVIS_BUILD_DIR/utils/bin

before_install:
  - bash .install-dependencies.sh

stages:
  - compile
  - test
  - style

jobs:
  include:
    - stage: compile
      script:
        - sbt clean compile
    - stage: test
      script:
        - sbt test -l tags.RequiresBackend
    - stage: style
      script:
        - sbt scalastyle  test:scalastyle
